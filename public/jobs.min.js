$(".btn-add-job").on("click",function(e){e.preventDefault(),$(this).prop("disabled",!0);var t=$("form.add-job"),a=new Object,o=$('input[name="collection"]').val();$(".tab-pane.active",t).each(function(){var e=$(this),t=new Object;t.type=e.data("type"),$("input, textarea, select",e).each(function(){$(this).attr("name")&&("checkbox"==$(this).attr("type")?t[$(this).attr("name")]=$(this).prop("checked")?1:0:t[$(this).attr("name")]=$(this).val())}),a[e.data("part")]=t}),a.schedule=$("#schedule option:checked").val(),$.ajax({url:baseURL+"api/input/"+o,data:JSON.stringify(a),method:"PUT",headers:{Accept:"application/json",Authorization:authHeader},success:function(e){window.location=baseURL+"api/admin/jobs"},error:function(e){if($(".btn-add-job").prop("disabled",!1),405!=e.status){var t=JSON.parse(e.responseText);t.error&&t.error.message&&($(".error .text").html(t.error.message),$(".error").removeClass("hide").show().focus())}else window.location=baseURL+"api/admin/jobs"}})}),$(".btn-edit-job").on("click",function(e){e.preventDefault(),$(this).prop("disabled",!0);var t=$("form.edit-job"),a=new Object,o=$('input[name="collection"]').val();$(".tab-pane",t).each(function(){var e=$(this),t=e.attr("id"),o=new Object;o.type=e.data("type"),$("input, textarea, select",e).each(function(){$(this).attr("name")&&("checkbox"==$(this).attr("type")?o[$(this).attr("name")]=$(this).prop("checked")?1:0:o[$(this).attr("name")]=$(this).val())}),a[t]=o}),a.schedule=$("#schedule option:checked").val(),$.ajax({url:baseURL+"api/input/"+o,data:JSON.stringify(a),method:"POST",headers:{Accept:"application/json",Authorization:authHeader},success:function(e){window.location=baseURL+"api/admin/jobs"},error:function(e){if($(".btn-edit-job").prop("disabled",!1),405!=e.status){var t=JSON.parse(e.responseText);t.error&&t.error.message&&($(".error .text").html(t.error.message),$(".error").removeClass("hide").show().focus())}else window.location=baseURL+"api/admin/jobs"}})});
